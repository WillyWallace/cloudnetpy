
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>High-level APIs &#8212; CloudnetPy  documentation</title>
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Quickstart" href="quickstart.html" /> 
  </head>
  <body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="quickstart.html" title="Quickstart"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">CloudnetPy  documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="high-level-apis">
<h1>High-level APIs<a class="headerlink" href="#high-level-apis" title="Permalink to this headline">¶</a></h1>
<p>CloudnetPy’s high-level APIs provide a simple way to process
cloud remote sensing measurements into Cloudnet products, without
needing to worry about implementation details.</p>
<p>The APIs enable users to set up an operational processing
system that doesn’t require major modifications
if the underlaying methods and their implementations change
from one software version to another.</p>
<dl class="function">
<dt id="radar.mmclx2nc">
<code class="descclassname">radar.</code><code class="descname">mmclx2nc</code><span class="sig-paren">(</span><em>mmclx_file</em>, <em>output_file</em>, <em>site_name</em>, <em>site_location</em>, <em>rebin_data=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/radar.html#mmclx2nc"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#radar.mmclx2nc" title="Permalink to this definition">¶</a></dt>
<dd><p>High-level API to convert mmclx file into compressed NetCDF file.</p>
<p>This function converts raw cloud radar file into a much smaller file that
contains only the relevant data and can be used in further processing steps.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>mmclx_file</strong> (<em>str</em>) – Raw radar file in NetCDF format.</li>
<li><strong>output_file</strong> (<em>str</em>) – Output file name.</li>
<li><strong>site_name</strong> (<em>str</em>) – Name of the site, e.g. ‘Mace-Head’.</li>
<li><strong>site_location</strong> (<em>tuple</em>) – 3-element tuple containing site
latitude, longitude and altitude.</li>
<li><strong>rebin_data</strong> (<em>bool</em><em>, </em><em>optional</em>) – If True, rebins data to 30s resolution.
Otherwise keeps the native resolution. Default is False.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">cloudnetpy</span> <span class="k">import</span> <span class="n">mmclx2nc</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mmclx2nc</span><span class="p">(</span><span class="s1">&#39;raw_radar.mmclx&#39;</span><span class="p">,</span> <span class="s1">&#39;output.nc&#39;</span><span class="p">,</span> <span class="s1">&#39;Vehmasmäki&#39;</span><span class="p">,</span> <span class="p">(</span><span class="mf">62.74</span><span class="p">,</span> <span class="mf">27.54</span><span class="p">,</span> <span class="mi">155</span><span class="p">))</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="modules">
<h1>Modules<a class="headerlink" href="#modules" title="Permalink to this headline">¶</a></h1>
<p>The various modules of CloudnetPy provide additional lower-level
functions that are useful for development, testing and research
purposes.</p>
<div class="section" id="cloudnetpy-categorize">
<h2>cloudnetpy.categorize<a class="headerlink" href="#cloudnetpy-categorize" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="cloudnetpy-classify">
<h2>cloudnetpy.classify<a class="headerlink" href="#cloudnetpy-classify" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-atmos">
<span id="cloudnetpy-atmos"></span><h2>cloudnetpy.atmos<a class="headerlink" href="#module-atmos" title="Permalink to this headline">¶</a></h2>
<p>This module contains functions to calculate
various atmospheric parameters.</p>
<dl class="function">
<dt id="atmos.c2k">
<code class="descclassname">atmos.</code><code class="descname">c2k</code><span class="sig-paren">(</span><em>temp</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/atmos.html#c2k"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#atmos.c2k" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts Celsius to Kelvins.</p>
</dd></dl>

<dl class="function">
<dt id="atmos.dew_point">
<code class="descclassname">atmos.</code><code class="descname">dew_point</code><span class="sig-paren">(</span><em>Pw</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/atmos.html#dew_point"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#atmos.dew_point" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns dew point temperature.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>Pw</strong> (<em>ndarray</em>) – Water wapor pressure (Pa).</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">Dew point temperature (K).</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">ndarray</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>Method from Vaisala’s white paper: “Humidity conversion formulas”.</p>
</dd></dl>

<dl class="function">
<dt id="atmos.gas_atten">
<code class="descclassname">atmos.</code><code class="descname">gas_atten</code><span class="sig-paren">(</span><em>model</em>, <em>cat_bits</em>, <em>height</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/atmos.html#gas_atten"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#atmos.gas_atten" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns gas attenuation (assumes saturation inside liquid droplets).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>model</strong> (<em>dict</em>) – Interpolated 2-D model fields {‘gas_atten’,
‘specific_gas_atten’, ‘specific_saturated_gas_atten’}.</li>
<li><strong>cat_bits</strong> (<em>ndarray</em>) – 2-D array of integers containing
categorize flag bits.</li>
<li><strong>height</strong> (<em>ndarray</em>) – 1-D altitude grid (m).</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Attenuation due to atmospheric gases.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference internal" href="#cloudnetarray.CloudnetArray" title="cloudnetarray.CloudnetArray">CloudnetArray</a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="atmos.get_attenuations">
<code class="descclassname">atmos.</code><code class="descname">get_attenuations</code><span class="sig-paren">(</span><em>model</em>, <em>mwr</em>, <em>classification</em>, <em>height</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/atmos.html#get_attenuations"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#atmos.get_attenuations" title="Permalink to this definition">¶</a></dt>
<dd><p>Wrapper for attenuations.</p>
</dd></dl>

<dl class="function">
<dt id="atmos.k2c">
<code class="descclassname">atmos.</code><code class="descname">k2c</code><span class="sig-paren">(</span><em>temp</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/atmos.html#k2c"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#atmos.k2c" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts Kelvins to Celsius.</p>
</dd></dl>

<dl class="function">
<dt id="atmos.liquid_atten">
<code class="descclassname">atmos.</code><code class="descname">liquid_atten</code><span class="sig-paren">(</span><em>mwr</em>, <em>model</em>, <em>classification</em>, <em>height</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/atmos.html#liquid_atten"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#atmos.liquid_atten" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates attenuation due to liquid water.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>lwp</strong> (<em>dict</em>) – Interpolated liquid water
path and its error {‘value’, ‘err’}.</li>
<li><strong>model</strong> (<em>dict</em>) – Interpolated 2-D model fields {‘temperature’, ‘pressure’,
‘specific_liquid_atten’}</li>
<li><strong>bits</strong> (<em>ndarray</em>) – Classification bits.</li>
<li><strong>height</strong> (<em>ndarray</em>) – 1-D altitude grid (m).</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><p>Dict containing</p>
<ul class="simple">
<li><strong>value</strong> (<em>MaskedArray</em>): Amount of liquid attenuation.</li>
<li><strong>err</strong> (<em>MaskedArray</em>): Error in the liquid attenuation.</li>
<li><strong>is_corr</strong> (<em>ndarray</em>): Boolean array denoting where liquid
attenuation is present and we can compute its value.</li>
<li><strong>is_not_corr</strong> (<em>ndarray</em>): Boolean array denoting where liquid
attenuation is present but we can not compute its value.</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="atmos.saturation_vapor_pressure">
<code class="descclassname">atmos.</code><code class="descname">saturation_vapor_pressure</code><span class="sig-paren">(</span><em>T</em>, <em>kind='accurate'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/atmos.html#saturation_vapor_pressure"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#atmos.saturation_vapor_pressure" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns water vapour saturation pressure (over liquid).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>T</strong> (<em>ndarray</em>) – Temperature (K).</li>
<li><strong>kind</strong> (<em>str</em><em>, </em><em>optional</em>) – Specifies the used method as a string
(‘accurate’, ‘fast’), where ‘accurate’ is the
IAPWS-95 formulation and ‘fast’ is Vaisala’s
simpler approximation. Default is ‘accurate’.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Saturation water vapor pressure (Pa).</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">ndarray</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="atmos.wet_bulb">
<code class="descclassname">atmos.</code><code class="descname">wet_bulb</code><span class="sig-paren">(</span><em>model_data</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/atmos.html#wet_bulb"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#atmos.wet_bulb" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns wet bulb temperature.</p>
<p>Returns wet bulb temperature for given temperature,
pressure and relative humidity. Algorithm is based on a Taylor
expansion of a simple expression for the saturated vapour pressure.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>model_data</strong> (<em>dict</em>) – Model variables ‘temperature’, ‘pressure’, ‘rh’.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">Wet bulb temperature (K).</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">ndarray</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-droplet">
<span id="cloudnetpy-droplet"></span><h2>cloudnetpy.droplet<a class="headerlink" href="#module-droplet" title="Permalink to this headline">¶</a></h2>
<p>This module has functions for liquid layer detection.</p>
<dl class="function">
<dt id="droplet.correct_liquid_top">
<code class="descclassname">droplet.</code><code class="descname">correct_liquid_top</code><span class="sig-paren">(</span><em>obs</em>, <em>liquid</em>, <em>is_freezing</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/droplet.html#correct_liquid_top"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#droplet.correct_liquid_top" title="Permalink to this definition">¶</a></dt>
<dd><p>Corrects lidar detected liquid cloud top using radar data.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>Z</strong> (<em>MaskedArray</em>) – 2-D array of radar echo.</li>
<li><strong>Tw</strong> (<em>ndarray</em>) – 2-D array of wet bulb temperature.</li>
<li><strong>is_freezing</strong> (<em>ndarray</em>) – 2-D boolean array of sub-zero temperature,
derived from the model temperature and melting layer based
on radar data.</li>
<li><strong>is_liquid</strong> (<em>ndarray</em>) – 2-D boolean array of liquid clouds.</li>
<li><strong>liquid_top</strong> (<em>ndarray</em>) – 2-D boolean array of liquid cloud tops.</li>
<li><strong>height</strong> (<em>ndarray</em>) – 1-D altitude grid (m).</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Corrected liquid cloud array.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">ndarray</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="droplet.find_liquid">
<code class="descclassname">droplet.</code><code class="descname">find_liquid</code><span class="sig-paren">(</span><em>obs</em>, <em>peak_amp=2e-05</em>, <em>max_width=300</em>, <em>min_points=3</em>, <em>min_top_der=2e-07</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/droplet.html#find_liquid"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#droplet.find_liquid" title="Permalink to this definition">¶</a></dt>
<dd><p>Estimate liquid layers from SNR-screened attenuated backscattering.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>beta</strong> (<em>MaskedArray</em>) – 2-D array of attenuated backscattering.</li>
<li><strong>height</strong> (<em>ndarray</em>) – 1-D altitude grid (m).</li>
<li><strong>peak_amp</strong> (<em>float</em><em>, </em><em>optional</em>) – Minimum value of peak. Default is 2e-5.</li>
<li><strong>max_width</strong> (<em>float</em><em>, </em><em>optional</em>) – Maximum width of peak. Default is 300 (m).</li>
<li><strong>min_points</strong> (<em>int</em><em>, </em><em>optional</em>) – Minimum number of valid points in peak.
Default is 3.</li>
<li><strong>min_top_der</strong> (<em>float</em><em>, </em><em>optional</em>) – Minimum derivative above peak,
defined as (beta_peak-beta_top) / (alt_top-alt_peak), which
is always positive. Default is 2e-7.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><p>3-element tuple containing</p>
<ul class="simple">
<li>ndarray: 2-D boolean array denoting liquid layers.</li>
<li>ndarray: 2-D boolean array denoting cloud bases.</li>
<li>ndarray: 2-D boolean array denoting cloud tops.</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="droplet.ind_base">
<code class="descclassname">droplet.</code><code class="descname">ind_base</code><span class="sig-paren">(</span><em>dprof</em>, <em>p</em>, <em>dist</em>, <em>lim</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/droplet.html#ind_base"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#droplet.ind_base" title="Permalink to this definition">¶</a></dt>
<dd><p>Finds base index of a peak in profile.</p>
<p>Return the lowermost index of profile where 1st order differences
below the peak exceed a threshold value.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>dprof</strong> (<em>ndarray</em>) – 1-D array of 1st discrete difference.
Masked values should be 0, e.g. dprof =
np.diff(masked_prof).filled(0)</li>
<li><strong>p</strong> (<em>int</em>) – Index of (possibly local) peak in the original profile.
Note that the peak must be found with some other method prior
calling this function.</li>
<li><strong>dist</strong> (<em>int</em>) – Number of elements investigated below <em>p</em>.
If ( <em>p</em> - <em>dist</em>)&lt;0, search starts from index 0.</li>
<li><strong>lim</strong> (<em>float</em>) – Parameter for base index. Values greater than 1.0
are valid. Values close to 1 most likely return the
point right below the maximum 1st order difference
(within <em>dist</em> points below <em>p</em>).
Values larger than 1 more likely
accept some other point, lower in the profile.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Base index of the peak.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">int</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<p>Consider a profile</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">99</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">5</span><span class="p">])</span>
</pre></div>
</div>
<p>that contains one bad, masked value</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">mx</span> <span class="o">=</span> <span class="n">ma</span><span class="o">.</span><span class="n">masked_array</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">mask</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
<span class="go">    [0 0.5, 1.0, --, 4.0, 8.0, 5.0]</span>
</pre></div>
</div>
<p>The 1st order difference is now</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">dx</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">diff</span><span class="p">(</span><span class="n">mx</span><span class="p">)</span><span class="o">.</span><span class="n">filled</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="go">    [0.5 0.5,  0. ,  0. ,  4. , -3. ]</span>
</pre></div>
</div>
<p>From the original profile we see that the peak index is 5.
Let’s assume our base can’t be more than 4 elements below
peak and the threshold value is 2. Thus we call</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ind_base</span><span class="p">(</span><span class="n">dx</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="go">    4</span>
</pre></div>
</div>
<p>When x[4] is the lowermost point that satisfies the condition.
Changing the threshold value would alter the result</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ind_base</span><span class="p">(</span><span class="n">dx</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<span class="go">    1</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last">droplet.ind_top()</p>
</div>
</dd></dl>

<dl class="function">
<dt id="droplet.ind_top">
<code class="descclassname">droplet.</code><code class="descname">ind_top</code><span class="sig-paren">(</span><em>dprof</em>, <em>p</em>, <em>nprof</em>, <em>dist</em>, <em>lim</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/droplet.html#ind_top"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#droplet.ind_top" title="Permalink to this definition">¶</a></dt>
<dd><p>Finds top index of a peak in profile.</p>
<p>Return the uppermost index of profile where 1st order differences
above the peak exceed a threshold value.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>dprof</strong> (<em>ndarray</em>) – 1-D array of 1st discrete difference.
Masked values should be 0, e.g. dprof =
np.diff(masked_prof).filled(0)</li>
<li><strong>nprof</strong> (<em>int</em>) – Length of the profile. Top index can’t be higher
than this.</li>
<li><strong>p</strong> (<em>int</em>) – Index of (possibly local) peak in the profile.
Note that the peak must be found with some other method prior
calling this function.</li>
<li><strong>dist</strong> (<em>int</em>) – Number of elements investigated above <em>p</em>.
If (<em>p</em> + <em>dist</em>) &gt; <em>nprof</em>, search ends to <em>nprof</em>.</li>
<li><strong>lim</strong> (<em>float</em>) – Parameter for top index. Values greater than 1.0
are valid. Values close to 1 most likely return the
point right above the maximum 1st order difference
(within <em>dist</em> points above <em>p</em>).
Values larger than 1 more likely
accept some other point, higher in the profile.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Top index of the peak.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">int</p>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last">droplet.ind_base()</p>
</div>
</dd></dl>

</div>
<div class="section" id="module-lwc">
<span id="cloudnetpy-lwc"></span><h2>cloudnetpy.lwc<a class="headerlink" href="#module-lwc" title="Permalink to this headline">¶</a></h2>
<p>Module for liquid water content calculations.</p>
<dl class="function">
<dt id="lwc.adiabatic_lwc">
<code class="descclassname">lwc.</code><code class="descname">adiabatic_lwc</code><span class="sig-paren">(</span><em>T</em>, <em>P</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lwc.html#adiabatic_lwc"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lwc.adiabatic_lwc" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns adiabatic LWC change rate.</p>
<p>Calculates the theoretical adiabatic rate of increase of LWC with
height, or pressure, given the cloud base temperature and pressure.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>T</strong> (<em>ndarray</em>) – Temperature of cloud base (K).</li>
<li><strong>P</strong> (<em>ndarray</em>) – Pressure of cloud base (Pa).</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">dlwc/dz in kg m-3 m-1</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">ndarray</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">References</p>
<p>Brenguier, 1991, <a class="reference external" href="https://bit.ly/2QCSJtb">https://bit.ly/2QCSJtb</a></p>
</dd></dl>

<dl class="function">
<dt id="lwc.temp2mixingratio">
<code class="descclassname">lwc.</code><code class="descname">temp2mixingratio</code><span class="sig-paren">(</span><em>T</em>, <em>P</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lwc.html#temp2mixingratio"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lwc.temp2mixingratio" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts temperature and pressure to mixing ratio.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>T</strong> (<em>ndarray</em>) – Temperature (K).</li>
<li><strong>P</strong> (<em>ndarray</em>) – Pressure (Pa).</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Mixing ratio.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">ndarray</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-cloudnetarray">
<span id="cloudnetpy-cloudnetarray"></span><h2>cloudnetpy.cloudnetarray<a class="headerlink" href="#module-cloudnetarray" title="Permalink to this headline">¶</a></h2>
<p>CloudnetArray class.</p>
<dl class="class">
<dt id="cloudnetarray.CloudnetArray">
<em class="property">class </em><code class="descclassname">cloudnetarray.</code><code class="descname">CloudnetArray</code><span class="sig-paren">(</span><em>netcdf4_variable</em>, <em>name</em>, <em>units_from_user=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cloudnetarray.html#CloudnetArray"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cloudnetarray.CloudnetArray" title="Permalink to this definition">¶</a></dt>
<dd><p>Stores NetCDF variables as CloudnetArrays.</p>
<dl class="attribute">
<dt id="cloudnetarray.CloudnetArray.name">
<code class="descname">name</code><a class="headerlink" href="#cloudnetarray.CloudnetArray.name" title="Permalink to this definition">¶</a></dt>
<dd><p><em>str</em> – Name of the variable.</p>
</dd></dl>

<dl class="attribute">
<dt id="cloudnetarray.CloudnetArray.data">
<code class="descname">data</code><a class="headerlink" href="#cloudnetarray.CloudnetArray.data" title="Permalink to this definition">¶</a></dt>
<dd><p><em>array_like</em> – The actual data.</p>
</dd></dl>

<dl class="attribute">
<dt id="cloudnetarray.CloudnetArray.data_type">
<code class="descname">data_type</code><a class="headerlink" href="#cloudnetarray.CloudnetArray.data_type" title="Permalink to this definition">¶</a></dt>
<dd><p><em>str</em> – ‘i4’ for integers, ‘f4’ for floats.</p>
</dd></dl>

<dl class="attribute">
<dt id="cloudnetarray.CloudnetArray.units">
<code class="descname">units</code><a class="headerlink" href="#cloudnetarray.CloudnetArray.units" title="Permalink to this definition">¶</a></dt>
<dd><p><em>str</em> – Copied from the original netcdf4
variable (if existing).</p>
</dd></dl>

<dl class="method">
<dt id="cloudnetarray.CloudnetArray.db2lin">
<code class="descname">db2lin</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/cloudnetarray.html#CloudnetArray.db2lin"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cloudnetarray.CloudnetArray.db2lin" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts log units to linear.</p>
</dd></dl>

<dl class="method">
<dt id="cloudnetarray.CloudnetArray.fetch_attributes">
<code class="descname">fetch_attributes</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/cloudnetarray.html#CloudnetArray.fetch_attributes"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cloudnetarray.CloudnetArray.fetch_attributes" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns list of user-defined attributes.</p>
</dd></dl>

<dl class="method">
<dt id="cloudnetarray.CloudnetArray.lin2db">
<code class="descname">lin2db</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/cloudnetarray.html#CloudnetArray.lin2db"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cloudnetarray.CloudnetArray.lin2db" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts linear units do log.</p>
</dd></dl>

<dl class="method">
<dt id="cloudnetarray.CloudnetArray.mask_indices">
<code class="descname">mask_indices</code><span class="sig-paren">(</span><em>ind</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cloudnetarray.html#CloudnetArray.mask_indices"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cloudnetarray.CloudnetArray.mask_indices" title="Permalink to this definition">¶</a></dt>
<dd><p>Masks data from given indices.</p>
</dd></dl>

<dl class="method">
<dt id="cloudnetarray.CloudnetArray.rebin_data">
<code class="descname">rebin_data</code><span class="sig-paren">(</span><em>time</em>, <em>time_new</em>, <em>height=None</em>, <em>height_new=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cloudnetarray.html#CloudnetArray.rebin_data"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cloudnetarray.CloudnetArray.rebin_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Rebins data in time and optionally in height.</p>
</dd></dl>

<dl class="method">
<dt id="cloudnetarray.CloudnetArray.rebin_in_polar">
<code class="descname">rebin_in_polar</code><span class="sig-paren">(</span><em>time</em>, <em>time_new</em>, <em>folding_velocity</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cloudnetarray.html#CloudnetArray.rebin_in_polar"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cloudnetarray.CloudnetArray.rebin_in_polar" title="Permalink to this definition">¶</a></dt>
<dd><p>Rebins velocity in polar coordinates.</p>
</dd></dl>

<dl class="method">
<dt id="cloudnetarray.CloudnetArray.set_attributes">
<code class="descname">set_attributes</code><span class="sig-paren">(</span><em>attributes</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cloudnetarray.html#CloudnetArray.set_attributes"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cloudnetarray.CloudnetArray.set_attributes" title="Permalink to this definition">¶</a></dt>
<dd><p>Set some attributes if they exist.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-utils">
<span id="cloudnetpy-utils"></span><h2>cloudnetpy.utils<a class="headerlink" href="#module-utils" title="Permalink to this headline">¶</a></h2>
<p>This module contains general
helper functions.</p>
<dl class="function">
<dt id="utils.bases_and_tops">
<code class="descclassname">utils.</code><code class="descname">bases_and_tops</code><span class="sig-paren">(</span><em>y</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils.html#bases_and_tops"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.bases_and_tops" title="Permalink to this definition">¶</a></dt>
<dd><p>Finds islands of ones from boolean 1-D array.</p>
<p>From a binary vector finds all “islands” of
ones, i.e. their starting and ending indices.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>y</strong> (<em>array_like</em>) – 1-D array of ones and zeros.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">2-element tuple containing<ul class="simple">
<li><em>ndarray</em>: Indices of bases.</li>
<li><em>ndarray</em>: Indices of tops.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">y</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bases_and_tops</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
<span class="go">    ([3, 7], [4, 9])</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="utils.binvec">
<code class="descclassname">utils.</code><code class="descname">binvec</code><span class="sig-paren">(</span><em>x</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils.html#binvec"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.binvec" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts 1-D center points to bins with even spacing.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>x</strong> (<em>array_like</em>) – 1-D array of N real values.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">N + 1 edge values.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">ndarray</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">binvec</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>
<span class="go">    [0.5, 1.5, 2.5, 3.5]</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="utils.cumsumr">
<code class="descclassname">utils.</code><code class="descname">cumsumr</code><span class="sig-paren">(</span><em>x</em>, <em>axis=0</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils.html#cumsumr"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.cumsumr" title="Permalink to this definition">¶</a></dt>
<dd><p>Finds cumulative sum that resets on 0.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>x</strong> (<em>ndarray</em>) – Input array.</li>
<li><strong>axis</strong> (<em>int</em><em>, </em><em>optional</em>) – Axis where the sum is calculated.
Default is 0.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Cumulative sum, restarted at 0.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">ndarray</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cumsumr</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="go">    [0, 0, 1, 2, 0, 0, 0, 1, 2, 3]</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="utils.db2lin">
<code class="descclassname">utils.</code><code class="descname">db2lin</code><span class="sig-paren">(</span><em>x</em>, <em>scale=10</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils.html#db2lin"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.db2lin" title="Permalink to this definition">¶</a></dt>
<dd><p>dB to linear conversion.</p>
</dd></dl>

<dl class="function">
<dt id="utils.ffill">
<code class="descclassname">utils.</code><code class="descname">ffill</code><span class="sig-paren">(</span><em>arr</em>, <em>value=0</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils.html#ffill"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.ffill" title="Permalink to this definition">¶</a></dt>
<dd><p>Forward fills a numpy array.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>arr</strong> (<em>ndarray</em>) – 1-D or 2-D array.</li>
<li><strong>value</strong> (<em>int</em>) – Value to be filled. Default is 0.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Forward-filled array.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">ndarray</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ffill</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="go">    [0, 5, 5, 5, 2, 2]</span>
</pre></div>
</div>
<p class="rubric">Notes</p>
<p>Works only in axis=1 direction.</p>
</dd></dl>

<dl class="function">
<dt id="utils.filter_isolated_pixels">
<code class="descclassname">utils.</code><code class="descname">filter_isolated_pixels</code><span class="sig-paren">(</span><em>array</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils.html#filter_isolated_pixels"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.filter_isolated_pixels" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns array with completely isolated single cells removed.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>array</strong> (<em>ndarray</em>) – 2-D input data with shape.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">Cleaned data.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">ndarray</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="utils.findkey">
<code class="descclassname">utils.</code><code class="descname">findkey</code><span class="sig-paren">(</span><em>vrs</em>, <em>possible_fields</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils.html#findkey"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.findkey" title="Permalink to this definition">¶</a></dt>
<dd><p>Finds first matching key from several possible.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>vrs</strong> (<em>dict</em>) – Dictionary or other
iterable containing strings.</li>
<li><strong>fields</strong> (<em>tuple</em>) – List of possible strings to be
searched.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">First matching key. None if nothing found.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">str</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;abc&#39;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;bac&#39;</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;cba&#39;</span><span class="p">:</span><span class="mi">3</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">findkey</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;bac&#39;</span><span class="p">,</span> <span class="s1">&#39;cba&#39;</span><span class="p">))</span>
<span class="go">    &#39;bac&#39;</span>
</pre></div>
</div>
<p>The order of the keys to be searched is defaining
the return value if there are several matching strings:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">findkey</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;cba&#39;</span><span class="p">,</span> <span class="s1">&#39;bac&#39;</span><span class="p">))</span>
<span class="go">    &#39;cba&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="utils.get_time">
<code class="descclassname">utils.</code><code class="descname">get_time</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils.html#get_time"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.get_time" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns current UTC-time.</p>
</dd></dl>

<dl class="function">
<dt id="utils.get_uuid">
<code class="descclassname">utils.</code><code class="descname">get_uuid</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils.html#get_uuid"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.get_uuid" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns unique file identifier.</p>
</dd></dl>

<dl class="function">
<dt id="utils.init">
<code class="descclassname">utils.</code><code class="descname">init</code><span class="sig-paren">(</span><em>nvars</em>, <em>shape</em>, <em>dtype=&lt;class 'float'&gt;</em>, <em>masked=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils.html#init"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.init" title="Permalink to this definition">¶</a></dt>
<dd><p>Initializes several numpy arrays.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>nvars</strong> (<em>int</em>) – Number of arrays to be generated.</li>
<li><strong>shape</strong> (<em>tuple</em>) – Shape of the arrays, e.g. (2, 3).</li>
<li><strong>dtype</strong> (<em>data-type</em><em>, </em><em>optional</em>) – The desired data-type
for the arrays, e.g., int. Default is float.</li>
<li><strong>masked</strong> (<em>bool</em>) – If True, generated arrays are masked
arrays, else ordinary numpy arrays. Default is True.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Yields:</th><td class="field-body"><p class="first last">Iterator containing the empty arrays.</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="n">init</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span>
<span class="go">    masked_array(</span>
<span class="go">      data=[[0., 0., 0.],</span>
<span class="go">            [0., 0., 0.]],</span>
<span class="go">      mask=False,</span>
<span class="go">      fill_value=1e+20)</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="utils.interpolate_2d">
<code class="descclassname">utils.</code><code class="descname">interpolate_2d</code><span class="sig-paren">(</span><em>x</em>, <em>y</em>, <em>z</em>, <em>x_new</em>, <em>y_new</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils.html#interpolate_2d"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.interpolate_2d" title="Permalink to this definition">¶</a></dt>
<dd><p>Linear interpolation of gridded 2d data.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>x</strong> (<em>ndarray</em>) – 1-D array.</li>
<li><strong>y</strong> (<em>ndarray</em>) – 1-D array.</li>
<li><strong>z</strong> (<em>ndarray</em>) – 2-D array at points (x, y).</li>
<li><strong>x_new</strong> (<em>ndarray</em>) – 1-D array.</li>
<li><strong>y_new</strong> (<em>ndarray</em>) – 1-D array.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Interpolated data.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">ndarray</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>Does not work with nans.</p>
</dd></dl>

<dl class="function">
<dt id="utils.isbit">
<code class="descclassname">utils.</code><code class="descname">isbit</code><span class="sig-paren">(</span><em>integer</em>, <em>nth_bit</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils.html#isbit"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.isbit" title="Permalink to this definition">¶</a></dt>
<dd><p>Tests if nth bit (0,1,2..) is on for the input number.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>integer</strong> (<em>int</em>) – A number.</li>
<li><strong>nth_bit</strong> (<em>int</em>) – Investigated bit.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">True if set, otherwise False.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first">bool</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><p class="first last"><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> – negative bit as input.</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">isbit</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="go">    False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">isbit</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="go">    True</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last">utils.setbit()</p>
</div>
</dd></dl>

<dl class="function">
<dt id="utils.isscalar">
<code class="descclassname">utils.</code><code class="descname">isscalar</code><span class="sig-paren">(</span><em>array</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils.html#isscalar"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.isscalar" title="Permalink to this definition">¶</a></dt>
<dd><p>Tests if input is scalar.</p>
<p>By “scalar” we mean that array has a single value.</p>
<p class="rubric">Examples</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">isscalar</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">isscalar</span><span class="p">([</span><span class="mi">1</span><span class="p">])</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">isscalar</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">isscalar</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">]))</span>
<span class="go">True</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="utils.km2m">
<code class="descclassname">utils.</code><code class="descname">km2m</code><span class="sig-paren">(</span><em>var</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils.html#km2m"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.km2m" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts km to m.</p>
</dd></dl>

<dl class="function">
<dt id="utils.l2norm">
<code class="descclassname">utils.</code><code class="descname">l2norm</code><span class="sig-paren">(</span><em>*args</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils.html#l2norm"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.l2norm" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns l2 norm.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>*args</strong> – Variable number of data (<em>array_like</em>)
with the same shape.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">The l2 norm.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">MaskedArray</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="utils.lin2db">
<code class="descclassname">utils.</code><code class="descname">lin2db</code><span class="sig-paren">(</span><em>x</em>, <em>scale=10</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils.html#lin2db"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.lin2db" title="Permalink to this definition">¶</a></dt>
<dd><p>Linear to dB conversion.</p>
</dd></dl>

<dl class="function">
<dt id="utils.m2km">
<code class="descclassname">utils.</code><code class="descname">m2km</code><span class="sig-paren">(</span><em>var</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils.html#m2km"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.m2km" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts m to km.</p>
</dd></dl>

<dl class="function">
<dt id="utils.mdiff">
<code class="descclassname">utils.</code><code class="descname">mdiff</code><span class="sig-paren">(</span><em>x</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils.html#mdiff"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.mdiff" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns median difference of 1-D array.</p>
</dd></dl>

<dl class="function">
<dt id="utils.n_elements">
<code class="descclassname">utils.</code><code class="descname">n_elements</code><span class="sig-paren">(</span><em>x</em>, <em>dist</em>, <em>var=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils.html#n_elements"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.n_elements" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the number of elements that cover certain distance.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>x</strong> (<em>ndarray</em>) – Input array with arbitrary units
or time in fraction hour. <em>x</em> should be
evenly spaced or at least close to.</li>
<li><strong>dist</strong> (<em>float</em>) – Distance to be covered. If x is fraction time,
<em>dist</em> is in minutes. Otherwise <em>x</em> and <em>dist</em> should have
the same units.</li>
<li><strong>var</strong> (<em>str</em><em>, </em><em>optional</em>) – ‘time’ or None. If None, inputs
have the same units. If ‘time’, input is fraction hour
and distance in minutes. Default is None.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Number of elements in the input array that cover <em>dist</em>.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">int</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">10</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">n_elements</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span>
<span class="go">    3</span>
</pre></div>
</div>
<p>The result is rounded to the closest integer, so:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">n_elements</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="mf">6.9</span><span class="p">)</span>
<span class="go">    3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">n_elements</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="mi">7</span><span class="p">)</span>
<span class="go">    4</span>
</pre></div>
</div>
<p>With fraction hour time vector:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">61</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">n_elements</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="s1">&#39;time&#39;</span><span class="p">)</span>
<span class="go">    10</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="utils.read_cloudnet_database">
<code class="descclassname">utils.</code><code class="descname">read_cloudnet_database</code><span class="sig-paren">(</span><em>site</em>, <em>*fields_in</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils.html#read_cloudnet_database"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.read_cloudnet_database" title="Permalink to this definition">¶</a></dt>
<dd><p>Read metadata from Cloudnet http API.</p>
</dd></dl>

<dl class="function">
<dt id="utils.rebin_2d">
<code class="descclassname">utils.</code><code class="descname">rebin_2d</code><span class="sig-paren">(</span><em>x_in</em>, <em>data</em>, <em>x_new</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils.html#rebin_2d"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.rebin_2d" title="Permalink to this definition">¶</a></dt>
<dd><p>Rebins 2-D data in one dimension using mean.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>x_in</strong> (<em>ndarray</em>) – 1-D array with shape (n,).</li>
<li><strong>data</strong> (<em>MaskedArray</em>) – 2-D input data with shape (n, m).</li>
<li><strong>x_new</strong> (<em>ndarray</em>) – 1-D target vector (center points)
with shape (N,).</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Rebinned (averaged) data with shape (N, m).</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">MaskedArray</p>
</td>
</tr>
</tbody>
</table>
<p>Notes: 0-values are masked in the returned array.</p>
</dd></dl>

<dl class="function">
<dt id="utils.seconds2hour">
<code class="descclassname">utils.</code><code class="descname">seconds2hour</code><span class="sig-paren">(</span><em>time_in</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils.html#seconds2hour"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.seconds2hour" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts seconds since some epoch to fraction hour.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>time_in</strong> (<em>ndarray</em>) – 1-D array of seconds since some epoch
that starts on midnight.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">Time as fraction hour.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">ndarray</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>Excludes leap seconds.</p>
</dd></dl>

<dl class="function">
<dt id="utils.setbit">
<code class="descclassname">utils.</code><code class="descname">setbit</code><span class="sig-paren">(</span><em>integer</em>, <em>nth_bit</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils.html#setbit"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.setbit" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets nth bit (0, 1, 2..) on input number.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>integer</strong> (<em>int</em>) – A number.</li>
<li><strong>nth_bit</strong> (<em>int</em>) – Bit to be set.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Integer where nth bit is set.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first">int</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><p class="first last"><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> – negative bit as input.</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">setbit</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="go">    3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">setbit</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="go">    4</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last">utils.isbit()</p>
</div>
</dd></dl>

<dl class="function">
<dt id="utils.time_grid">
<code class="descclassname">utils.</code><code class="descname">time_grid</code><span class="sig-paren">(</span><em>reso=30</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils.html#time_grid"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.time_grid" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes fraction hour time vector 0-24 with user-given
resolution (in seconds) where 60 is the maximum allowed value.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>reso</strong> (<em>int</em><em>, </em><em>optional</em>) – Time resolution in seconds between 1 and 60.
Default is 30.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">Time vector between 0 and 24.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">ndarray</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> – Bad resolution as input.</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">High-level APIs</a></li>
<li><a class="reference internal" href="#modules">Modules</a><ul>
<li><a class="reference internal" href="#cloudnetpy-categorize">cloudnetpy.categorize</a></li>
<li><a class="reference internal" href="#cloudnetpy-classify">cloudnetpy.classify</a></li>
<li><a class="reference internal" href="#module-atmos">cloudnetpy.atmos</a></li>
<li><a class="reference internal" href="#module-droplet">cloudnetpy.droplet</a></li>
<li><a class="reference internal" href="#module-lwc">cloudnetpy.lwc</a></li>
<li><a class="reference internal" href="#module-cloudnetarray">cloudnetpy.cloudnetarray</a></li>
<li><a class="reference internal" href="#module-utils">cloudnetpy.utils</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="quickstart.html"
                        title="previous chapter">Quickstart</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/api.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="quickstart.html" title="Quickstart"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">CloudnetPy  documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2018, Finnish Meteorological Institute.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.6.7.
    </div>
  </body>
</html>